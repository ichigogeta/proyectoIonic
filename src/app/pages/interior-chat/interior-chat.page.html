<ion-header no-border="no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button class="editar"></ion-button>
    </ion-buttons>

    <ion-title class="ion-text-center">
      <p class="nombre">{{nombreChat}}</p>

      <p class="conexion" *ngIf="!escribiendo">
        Último mensaje {{ultimoMensaje | date:'h:mm a'}}
      </p>

      <p class="escribiendo" *ngIf="escribiendo">
        {{escribiendoUser}} está escribiendo ...
      </p>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content #content>
  <div [ngClass]="(mensaje?.avatar) ? 'item-izq' : 'item-der'" *ngFor="let mensaje of mensajes">
    <div [ngClass]="(mensaje?.avatar) ? 'izq' : 'der'">
      <ion-avatar *ngIf="mensaje.avatar">
        <img [src]="mensaje.avatar">
      </ion-avatar>

      <div class="mensaje">
        <img *ngIf="mensaje?.urlImagen" [src]="mensaje?.urlImagen">

        <p>{{mensaje.texto}}</p>
      </div>
    </div>

    <span class="hora">
      {{mensaje.created_at | date:'h:mm a'}}
    </span>
  </div>
</ion-content>

<ion-footer>
  <ion-item>
    <!-- <ion-label >
      <div>
        
      </div>
      <ion-input type="text" placeholder="Escribe tu mensaje..." [(ngModel)]="mensajeActual.texto"></ion-input>
    </ion-label> -->
    <img class="imagen" [src]="mensajeActual.urlImagen" *ngIf="mensajeActual.urlImagen">
    <ion-label class="ion-text-center texto" position="stacked">

    </ion-label>

    <ion-input type="text" placeholder="Escribe tu mensaje..." [(ngModel)]="mensajeActual.texto"></ion-input>

    <ion-icon class="close" name="close-circle" *ngIf="mensajeActual.urlImagen" (click)="borrarImagen()"></ion-icon>

    <ion-icon class="camera" name="camera" slot="end" (click)="adjuntarImagen()"></ion-icon>

    <ion-icon class="send" name="send" slot="end" (click)="publicarMensaje()"></ion-icon>
  </ion-item>
</ion-footer>